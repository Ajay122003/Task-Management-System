{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container mt-5 mb-5">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-header bg-dark text-white text-center rounded-top-4 py-3">
      <h2 class="mb-0"><i class="bi bi-speedometer2"></i> Admin Dashboard</h2>
      <p class="mb-0">Welcome, <strong>{{ request.user.username }}</strong> </p>
    </div>

    <div class="card-body bg-light p-4">

      <!-- Users Section -->
      <h4 class="mb-3 text-primary"><i class="bi bi-people"></i> Registered Users</h4>
      {% if users %}
      <div class="table-responsive mb-5">
        <table class="table table-hover align-middle table-bordered border-secondary">
          <thead class="table-dark text-center">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Username</th>
              <th scope="col">Email</th>
              <th scope="col">Date Joined</th>
              <th scope="col">Is Staff</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ user.username }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.date_joined|date:"M d, Y" }}</td>
              <td>
                {% if user.is_staff %}
                  <span class="badge bg-success">Yes</span>
                {% else %}
                  <span class="badge bg-secondary">No</span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
        <p class="text-muted">No users registered yet.</p>
      {% endif %}

      <!-- Tasks Section -->
      <h4 class="mb-3 text-success"><i class="bi bi-list-task"></i> All Tasks</h4>
      {% if tasks %}
      <div class="table-responsive">
        <table class="table table-striped table-hover align-middle table-bordered border-secondary">
          <thead class="table-dark text-center">
            <tr>
              <th scope="col">#</th>
              <th scope="col">User</th>
              <th scope="col">Title</th>
              <th scope="col">Description</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            {% for t in tasks %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td><i class="bi bi-person-circle"></i> {{ t.user.username }}</td>
              <td>{{ t.title }}</td>
              <td>{{ t.description }}</td>
              <td class="text-center">
                {% if t.status %}
                  <span class="badge bg-success px-3 py-2"> Completed</span>
                {% else %}
                  <span class="badge bg-warning text-dark px-3 py-2"> Pending</span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
        <p class="text-muted">No tasks available yet.</p>
      {% endif %}
    </div>
  </div>
</div>

<!-- Optional: Bootstrap icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
{% endblock %}

